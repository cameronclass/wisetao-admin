# План миграции с SQLite на MySQL

## Подготовительные шаги

1. Создание резервной копии текущей базы данных SQLite

    - Сохранить копию файла database.sqlite
    - Экспортировать структуру и данные для безопасности

2. Подготовка MySQL
    - Проверить подключение к MySQL с предоставленными учетными данными:
        ```
        host: localhost
        database: wisetao_admin
        login: root
        password: ''
        ```
    - Создать базу данных если она не существует:
        ```sql
        CREATE DATABASE IF NOT EXISTS wisetao_admin;
        ```

## Настройка конфигурации

1. Обновить файл .env

    ```
    DB_CONNECTION=mysql
    DB_HOST=localhost
    DB_PORT=3306
    DB_DATABASE=wisetao_admin
    DB_USERNAME=root
    DB_PASSWORD=
    ```

2. Проверить настройки в config/database.php
    - Убедиться, что конфигурация MySQL корректна
    - Проверить кодировку и сопоставление (рекомендуется utf8mb4)

## Миграция данных

1. Подготовка миграций

    - Проверить все существующие миграции на совместимость с MySQL
    - Особое внимание уделить типам данных и индексам
    - Убедиться, что все внешние ключи правильно определены

2. Выполнение миграций

    ```bash
    php artisan migrate:fresh
    ```

3. Перенос данных
    - Создать временные таблицы для импорта данных из SQLite
    - Перенести данные с учетом различий в типах данных
    - Проверить целостность перенесенных данных

## Проверка и тестирование

1. Проверка работоспособности

    - Запустить все тесты приложения
    - Проверить основные функции CRUD
    - Убедиться в корректной работе связей между таблицами

2. Мониторинг производительности
    - Проверить скорость выполнения запросов
    - Оптимизировать индексы при необходимости
    - Настроить кэширование запросов

## Развертывание

1. Подготовка к продакшену

    - Создать скрипты для автоматического резервного копирования
    - Настроить мониторинг базы данных
    - Обновить документацию проекта

2. Откат в случае проблем
    - Подготовить план отката к SQLite
    - Сохранить все необходимые данные для отката
    - Документировать процедуру отката

## Дополнительные рекомендации

1. Оптимизация

    - Настроить пул соединений
    - Оптимизировать конфигурацию MySQL
    - Настроить индексы для частых запросов

2. Безопасность

    - Создать отдельного пользователя MySQL для приложения
    - Настроить права доступа
    - Обеспечить безопасное хранение учетных данных

3. Мониторинг
    - Настроить логирование медленных запросов
    - Установить инструменты мониторинга
    - Настроить оповещения о проблемах
